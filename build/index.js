"use strict";var WikiSearch=function(){var e="",t="",r="",a=null;return{getPreviousSearch:function(){return e},searchPageTitle:function(e,r,s,n){var i=this,o={action:"query",format:"json",prop:"extracts|pageimages",exchars:300,explaintext:"true",exintro:"true",piprop:"thumbnail",pithumbsize:300,titles:e[r]};$.ajax({url:"https://en.wikipedia.org/w/api.php",dataType:"jsonp",data:o,success:function(o){var c=o.query.pages;$.map(c,function(t){var s=$('<div class="result">'),n="https://en.wikipedia.org/wiki/"+e[r].replace(/ /g,"_");if(s.append($("<h2>").html('<a class="wiki-serif" target="_blank" rel="noopener noreferrer" href="'+n+'">'+e[r]+"</a>")),t.thumbnail){var i=$('<div class="result-thumbnail-container">');s.append(i.append($('<img class="result-thumbnail">').attr("src",t.thumbnail.source)))}s.append($("<p>").html(t.extract)),s.append($('<hr class="hr-result">')),a.append(s)}),r!=s-1?i.searchPageTitle(e,r+1,s):(n||$(".hr-result").show(),$("#search-results").append(a),$(".hr-result").last().hide(),$("#loading-new").hide(),$("#loading-more").hide(),$("#txt-search").autocomplete("close"),$("#results-container").fadeIn(),""!=t?$("#btn-more").show():$("#btn-more").hide())},error:function(e){console.log(e)}})},searchPageTitles:function(e,t){var r=0,s=e.length;$("#txt-search").autocomplete("close"),a=$('<div class="batch-results">'),this.searchPageTitle(e,r,s,t)},searchWiki:function(a,s){var n=this;$("#btn-more").hide(),$("#no-results").hide();var i={action:"query",format:"json",redirects:"true",list:"search",srsearch:a,srlimit:10,"continue":t,sroffset:r};s?(i["continue"]="",i.sroffset="",$("#results-container").hide(),$("#search-results").html(""),$("#loading-new").show()):$("#loading-more").show();var o=[];$.ajax({url:"https://en.wikipedia.org/w/api.php",dataType:"jsonp",data:i,success:function(i){var c=i.query.search;0!=c.length?($.map(c,function(e){o.push(e.title)}),e=a,void 0!=i["continue"]?(t=i["continue"]["continue"],r=i["continue"].sroffset):(t="",r=""),n.searchPageTitles(o,s)):($("#loading-new").hide(),$("#no-results").show())},error:function(e){console.log(e)}})}}};$(document).ready(function(){var e=new WikiSearch;$("#btn-search").on("click",function(t){var r=$("#txt-search").val();if(""!=r)return $("#txt-search").autocomplete("close"),e.searchWiki(r,!0),!1}),$("#txt-search").keypress(function(t){var r=$("#txt-search").val();if(""!=r&&13==t.which)return $("#txt-search").autocomplete("close"),e.searchWiki(r,!0),!1}),$("#btn-more").on("click",function(t){e.searchWiki(e.getPreviousSearch(),!1)}),$("#txt-search").autocomplete({source:function(e,t){var r={action:"opensearch",format:"json",search:e.term};$.ajax({url:"https://en.wikipedia.org/w/api.php",dataType:"jsonp",data:r,success:function(e){t(e[1])},error:function(e){t([])}})}})});